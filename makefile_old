FLAGS = -ggdb -Wreturn-type -Wparentheses -Wall -Wno-unused -O3 -Wshadow \
	-I$(HOME)/install/include -DO2SCL_ARRAY_ABORT \
	-I$(HOME)/install/include/hdf5 -DO2SCL_HDF_SVAR \
	-I$(HOME)/install/include/o2scl-0.912

ROOT_INC = -I$(HOME)/root/include
ROOT_LIB = $(HOME)/svn/o2int/trunk/src/other/graph.o \
	-L$(HOME)/root/lib \
	-lgsl -lgslcblas -lm \
        -lCore -lCint -lRIO -lNet -lHist -lGraf -lGraf3d \
	-lGpad -lTree -lRint -lPostscript -lMatrix -lPhysics \
	-lMathCore -lThread -lz -pthread -lm -ldl -rdynamic

LIB = -L$(HOME)/install/lib \
	-lo2scl_hdf -lo2scl_eos -lo2scl_part \
	-lo2scl -lgsl -lgslcblas -lhdf5_hl -lhdf5 -lz -lm 

####################################################################

sunx:
	crust -set hd_flag 0 -set freq_gr 0 -set freq_mass 1.4 \
		-shear prc_feq/SLy4_cs01_feq.o2 x0 > x0.scr &
	crust -set hd_flag 0 -set freq_gr 1 -set freq_mass 1.4 \
		-shear prc_feq/SLy4_cs01_feq.o2 x1 > x1.scr &

thu:
	crust -set hd_flag 0 -set freq_gr 1 -set freq_mass 1.0 \
		-shear prc_feq/SLy4_cs01_feq.o2 alex_oct/SLy4_0_10

fri2:
	crust -set hd_flag 0 -set freq_gr 1 -set freq_mass 1.0 \
		-shear prc_feq/SLy4_cs01_feq.o2 alex_oct/SLy4_0_10b
# > \
#		alex_oct/SLy4_0_10.scr

thu2:
	crust -set hd_flag 1 -set freq_gr 1 -set freq_mass 1.0 \
		-shear prc_feq/SLy4_cs01_feq.o2 alex_oct/SLy4_1_10 > \
		alex_oct/SLy4_1_10.scr
	crust -set hd_flag 2 -set freq_gr 1 -set freq_mass 1.0 \
		-shear prc_feq/SLy4_cs01_feq.o2 alex_oct/SLy4_2_10 > \
		alex_oct/SLy4_2_10.scr
	crust -set hd_flag 3 -set freq_gr 1 -set freq_mass 1.0 \
		-shear prc_feq/SLy4_cs01_feq.o2 alex_oct/SLy4_3_10 > \
		alex_oct/SLy4_3_10.scr
	crust -set hd_flag 4 -set freq_gr 1 -set freq_mass 1.0 \
		-shear prc_feq/SLy4_cs01_feq.o2 alex_oct/SLy4_4_10 > \
		alex_oct/SLy4_4_10.scr

fri:
	source alex_oct1.scr &
	source alex_oct2.scr &
	source alex_oct3.scr &
	source alex_oct4.scr &

####################################################################

clean:
	rm -f *.o crust crust_stat

HEADERS = crust.h crust_fit.h dist_thermo.h eigen.h funct.h \
	ldrop_crust.h main.h matter.h multi_zone.h nm_thermo.h \
	pyc_rates.h rxns.h sna_thermo.h table3d_eos.h

crust.o: crust.cpp $(HEADERS)
	g++ -DO2SCL_READLINE $(FLAGS) -c crust.cpp

crust_stat.o: crust.cpp $(HEADERS)
	g++ $(FLAGS) -c crust.cpp -o crust_stat.o

main.o: main.cpp $(HEADERS)
	g++ $(FLAGS) -c main.cpp

matter.o: matter.cpp $(HEADERS)
	g++ $(FLAGS) -c matter.cpp

crust_fit.o: crust_fit.cpp $(HEADERS)
	g++ $(FLAGS) -c crust_fit.cpp

multi_zone.o: multi_zone.cpp $(HEADERS)
	g++ $(FLAGS) -c multi_zone.cpp

rxns.o: rxns.cpp $(HEADERS)
	g++ $(FLAGS) -c rxns.cpp

dist_thermo.o: dist_thermo.cpp $(HEADERS)
	g++ $(FLAGS) -c dist_thermo.cpp

nm_thermo.o: nm_thermo.cpp $(HEADERS)
	g++ $(FLAGS) -c nm_thermo.cpp

sna_thermo.o: sna_thermo.cpp $(HEADERS)
	g++ $(FLAGS) -c sna_thermo.cpp

pyc_rates.o: pyc_rates.cpp $(HEADERS)
	g++ $(FLAGS) -c pyc_rates.cpp

eigen.o: eigen.cpp $(HEADERS)
	g++ $(FLAGS) -c eigen.cpp

ldrop_crust.o: ldrop_crust.cpp $(HEADERS)
	g++ $(FLAGS) -c ldrop_crust.cpp

crust: crust.o main.o ldrop_crust.o pyc_rates.o eigen.o \
		matter.o rxns.o dist_thermo.o crust_fit.o multi_zone.o \
		nm_thermo.o sna_thermo.o $(HEADERS)
	g++ -DO2SCL_READLINE $(FLAGS) -o crust crust.o pyc_rates.o eigen.o \
		main.o ldrop_crust.o multi_zone.o matter.o rxns.o \
		nm_thermo.o sna_thermo.o \
		dist_thermo.o crust_fit.o -lreadline -lncurses $(LIB)

crust_stat: crust_stat.o main.o ldrop_crust.o pyc_rates.o \
		nm_thermo.o sna_thermo.o  $(HEADERS) \
		eigen.o matter.o rxns.o dist_thermo.o crust_fit.o
	g++ -static $(FLAGS) -o crust_stat main.o crust_stat.o pyc_rates.o \
		eigen.o crust_fit.o multi_zone.o ldrop_crust.o matter.o \
		nm_thermo.o sna_thermo.o \
		rxns.o dist_thermo.o $(LIB) -lreadline -lncurses

####################################################################

slb.o: slb.cpp
	g++ $(FLAGS) -c slb.cpp

slb: slb.o
	g++ $(FLAGS) -o slb slb.o $(LIB)

bfit.o: bfit.cpp
	g++ $(FLAGS) -c bfit.cpp

bfit: bfit.o
	g++ $(FLAGS) -o bfit bfit.o $(LIB)

doc: empty
	cd doc; doxygen doxyfile
	cd doc; perl rep.perl < html/search/search.css > temp.css
	cd doc; mv temp.css html/search/search.css

docp: empty
	cd doc/latex; $(MAKE)

empty: 

